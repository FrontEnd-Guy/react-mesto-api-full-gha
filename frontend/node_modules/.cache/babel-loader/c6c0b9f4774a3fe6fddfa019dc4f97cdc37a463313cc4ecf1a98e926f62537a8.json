{"ast":null,"code":"import _classCallCheck from\"/Users/paul/Praktikum/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/paul/Praktikum/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{apiConfig}from\"./constants\";var API=/*#__PURE__*/function(){function API(config){_classCallCheck(this,API);this.headers=config.headers;this.baseUrl=config.baseUrl;}_createClass(API,[{key:\"_checkResponseStatus\",value:function _checkResponseStatus(response){if(response.ok){return response.json();}return Promise.reject(\"Error: \".concat(response.status));}},{key:\"getUserInfo\",value:function getUserInfo(){var _this=this;return fetch(\"\".concat(this.baseUrl,\"/users/me\"),{method:'GET',headers:this.headers}).then(function(res){return _this._checkResponseStatus(res);});}},{key:\"editUserInfo\",value:function editUserInfo(data){var _this2=this;return fetch(\"\".concat(this.baseUrl,\"/users/me\"),{method:'PATCH',headers:this.headers,body:JSON.stringify({name:data.name,about:data.about})}).then(function(res){return _this2._checkResponseStatus(res);});}},{key:\"createCard\",value:function createCard(card){var _this3=this;return fetch(\"\".concat(this.baseUrl,\"/cards\"),{method:'POST',headers:this.headers,body:JSON.stringify(card)}).then(function(res){return _this3._checkResponseStatus(res);});}},{key:\"deleteCard\",value:function deleteCard(id){var _this4=this;return fetch(\"\".concat(this.baseUrl,\"/cards/\").concat(id),{method:'DELETE',headers:this.headers}).then(function(res){return _this4._checkResponseStatus(res);});}},{key:\"getCardsList\",value:function getCardsList(){var _this5=this;return fetch(\"\".concat(this.baseUrl,\"/cards\"),{method:'GET',headers:this.headers}).then(function(res){return _this5._checkResponseStatus(res);});}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(id,isLiked){var _this6=this;if(isLiked){return fetch(\"\".concat(this.baseUrl,\"/cards/\").concat(id,\"/likes\"),{method:'PUT',headers:this.headers}).then(function(res){return _this6._checkResponseStatus(res);});}return fetch(\"\".concat(this.baseUrl,\"/cards/\").concat(id,\"/likes\"),{method:'DELETE',headers:this.headers}).then(function(res){return _this6._checkResponseStatus(res);});}},{key:\"updateAvatar\",value:function updateAvatar(data){var _this7=this;return fetch(\"\".concat(this.baseUrl,\"/users/me/avatar\"),{method:'PATCH',headers:this.headers,body:JSON.stringify({avatar:data.avatar})}).then(function(res){return _this7._checkResponseStatus(res);});}}]);return API;}();export var api=new API(apiConfig);","map":{"version":3,"names":["apiConfig","API","config","headers","baseUrl","response","ok","json","Promise","reject","status","fetch","method","then","res","_checkResponseStatus","data","body","JSON","stringify","name","about","card","id","isLiked","avatar","api"],"sources":["/Users/paul/Praktikum/dev/react-mesto-auth/src/utils/API.js"],"sourcesContent":["import { apiConfig } from \"./constants\";\n\nclass API {\n    constructor(config){\n        this.headers = config.headers;\n        this.baseUrl = config.baseUrl;\n    };\n\n    _checkResponseStatus(response){\n        if (response.ok) {\n            return response.json();\n        }\n        return Promise.reject(`Error: ${response.status}`);\n    }\n\n    getUserInfo(){\n        return fetch(`${this.baseUrl}/users/me`, {\n            method: 'GET',\n            headers: this.headers\n        })\n        .then(res => this._checkResponseStatus(res))\n    };\n\n    editUserInfo(data){\n        return fetch(`${this.baseUrl}/users/me`, {\n            method: 'PATCH',\n            headers: this.headers,\n            body: JSON.stringify({\n                name: data.name,\n                about: data.about\n              })\n        })\n        .then(res => this._checkResponseStatus(res))\n    };  \n    \n    createCard(card){\n        return fetch(`${this.baseUrl}/cards`, {\n            method: 'POST',\n            headers: this.headers,\n            body: JSON.stringify(card),\n        })\n        .then(res => this._checkResponseStatus(res))\n    };\n\n    deleteCard(id){\n        return fetch(`${this.baseUrl}/cards/${id}`, {\n            method: 'DELETE',\n            headers: this.headers\n        })\n        .then(res => this._checkResponseStatus(res))\n    };\n\n    getCardsList(){\n        return fetch(`${this.baseUrl}/cards`, {\n            method: 'GET',\n            headers: this.headers\n        })\n        .then(res => this._checkResponseStatus(res))\n    };\n\n    changeLikeCardStatus(id, isLiked){\n        if (isLiked){\n            return fetch(`${this.baseUrl}/cards/${id}/likes`, {\n                method: 'PUT',\n                headers: this.headers\n            })\n            .then(res => this._checkResponseStatus(res))\n        }  \n        return fetch(`${this.baseUrl}/cards/${id}/likes`, {\n            method: 'DELETE',\n            headers: this.headers\n        })\n        .then(res => this._checkResponseStatus(res))\n    };\n\n    updateAvatar(data){\n        return fetch(`${this.baseUrl}/users/me/avatar`, {\n            method: 'PATCH',\n            headers: this.headers,\n            body: JSON.stringify({\n                avatar: data.avatar\n            })\n        })\n        .then(res => this._checkResponseStatus(res))\n    };\n}\n\nexport const api = new API(apiConfig);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}