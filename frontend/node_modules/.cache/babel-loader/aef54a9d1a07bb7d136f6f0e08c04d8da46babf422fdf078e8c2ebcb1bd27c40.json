{"ast":null,"code":"import _toConsumableArray from\"/Users/paul/Praktikum/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/paul/Praktikum/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import'../index.css';import{api}from\"../utils/API\";import Header from'./Header';import Main from'./Main';import Footer from'./Footer';import ImagePopup from'./ImagePopup';import{EditProfilePopup}from'./EditProfilePopup';import{EditAvatarPopup}from'./EditAvatarPopup';import{AddPlacePopup}from'./AddPlacePopup';import{PopupWithForm}from'./PopupWithForm';import{CurrentUserContext}from'../contexts/CurrentUserContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),currentUser=_useState2[0],setCurrentUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isEditProfilePopupOpen=_useState4[0],setEditProfilePopupState=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAddPlacePopupOpen=_useState6[0],setAddPlacePopupState=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isEditAvatarPopupOpen=_useState8[0],setEditAvatarPopupState=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),selectedCard=_useState10[0],setSelectedCard=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),cards=_useState12[0],setCards=_useState12[1];useEffect(function(){api.getUserInfo().then(function(data){return setCurrentUser(data);}).catch(function(err){console.log(err);});},[]);useEffect(function(){api.getCardsList().then(function(cards){return setCards(cards);}).catch(function(err){console.log(err);});});function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});api.changeLikeCardStatus(card._id,!isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});});}function handleCardClick(card){setSelectedCard(card);}function handleCardDelete(card){api.deleteCard(card._id).then(function(deletedCard){setCards(function(state){return state.filter(function(c){return c._id!=deletedCard._id;});});});}function handleEditAvatarClick(){setEditAvatarPopupState(true);}function handleEditProfileClick(){setEditProfilePopupState(true);}function handleAddPlaceClick(){setAddPlacePopupState(true);}function closeAllPopups(){setEditAvatarPopupState(false);setAddPlacePopupState(false);setEditProfilePopupState(false);setSelectedCard(null);}function handleUpdateUser(data){api.editUserInfo(data).then(function(updatedUserInfo){setCurrentUser(updatedUserInfo);});closeAllPopups();}function handleUpdateAvatar(data){api.updateAvatar(data).then(function(updatedAvater){setCurrentUser(updatedAvater);});closeAllPopups();}function handleAddPlaceSubmit(data){api.createCard(data).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));});closeAllPopups();}return/*#__PURE__*/_jsxs(CurrentUserContext.Provider,{value:currentUser,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{cards:cards,onCardLike:handleCardLike,onCardDelete:handleCardDelete,onCardClick:handleCardClick,onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onEditAvatar:handleEditAvatarClick}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,onClose:closeAllPopups}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(PopupWithForm,{title:\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B?\",name:\"delete-card\",buttonText:\"\\u0414\\u0430\"}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar})]});}export default App;","map":{"version":3,"names":["useState","useEffect","api","Header","Main","Footer","ImagePopup","EditProfilePopup","EditAvatarPopup","AddPlacePopup","PopupWithForm","CurrentUserContext","App","currentUser","setCurrentUser","isEditProfilePopupOpen","setEditProfilePopupState","isAddPlacePopupOpen","setAddPlacePopupState","isEditAvatarPopupOpen","setEditAvatarPopupState","selectedCard","setSelectedCard","cards","setCards","getUserInfo","then","data","catch","err","console","log","getCardsList","handleCardLike","card","isLiked","likes","some","i","_id","changeLikeCardStatus","newCard","state","map","c","handleCardClick","handleCardDelete","deleteCard","deletedCard","filter","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","closeAllPopups","handleUpdateUser","editUserInfo","updatedUserInfo","handleUpdateAvatar","updateAvatar","updatedAvater","handleAddPlaceSubmit","createCard"],"sources":["/Users/paul/Praktikum/dev/mesto-react/src/components/App.js"],"sourcesContent":["import {useState, useEffect} from 'react';\nimport '../index.css';\nimport { api } from \"../utils/API\";\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport ImagePopup from './ImagePopup';\nimport { EditProfilePopup } from './EditProfilePopup';\nimport { EditAvatarPopup } from './EditAvatarPopup';\nimport { AddPlacePopup } from './AddPlacePopup';\nimport { PopupWithForm } from './PopupWithForm';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\n\nfunction App() {\n  const [currentUser, setCurrentUser] = useState(null);\n  const [isEditProfilePopupOpen, setEditProfilePopupState] = useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupState] = useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupState] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [cards, setCards] = useState([])\n\n  useEffect(()=>{\n    api.getUserInfo()\n      .then((data) => setCurrentUser(data))\n      .catch((err) =>{\n        console.log(err);\n      })\n  },[]);\n\n  useEffect(()=>{\n    api.getCardsList()\n        .then((cards) => setCards(cards))\n        .catch((err) =>{\n            console.log(err);\n        })\n  });  \n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    api.changeLikeCardStatus(card._id, !isLiked).then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n    });\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card)\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id).then((deletedCard) => {\n      setCards((state) => state.filter((c) => c._id != deletedCard._id));\n    });\n  }\n\n  function handleEditAvatarClick(){\n    setEditAvatarPopupState(true)\n  }\n\n  function handleEditProfileClick(){\n    setEditProfilePopupState(true)\n  }\n\n  function handleAddPlaceClick(){\n    setAddPlacePopupState(true)\n  }\n\n  function closeAllPopups(){\n    setEditAvatarPopupState(false)\n    setAddPlacePopupState(false)\n    setEditProfilePopupState(false)\n    setSelectedCard(null)\n  }\n\n  function handleUpdateUser(data){\n    api.editUserInfo(data)\n      .then((updatedUserInfo) =>{\n        setCurrentUser(updatedUserInfo)\n      })\n    closeAllPopups();\n  }\n\n  function handleUpdateAvatar(data) {\n    api.updateAvatar(data)\n      .then((updatedAvater) =>{\n        setCurrentUser(updatedAvater)\n      })\n    closeAllPopups();\n  }\n\n  function handleAddPlaceSubmit(data) {\n    api.createCard(data)\n      .then((newCard) =>{\n        setCards([newCard, ...cards])\n      })\n    closeAllPopups();\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <Header />\n      <Main \n          cards = {cards}\n          onCardLike = {handleCardLike}\n          onCardDelete = {handleCardDelete}\n          onCardClick = {handleCardClick}\n          onEditProfile = {handleEditProfileClick} \n          onAddPlace = {handleAddPlaceClick} \n          onEditAvatar = {handleEditAvatarClick}/>\n      <Footer />\n      <ImagePopup \n          card={selectedCard} \n          onClose={closeAllPopups}/>\n      <EditProfilePopup \n          isOpen={isEditProfilePopupOpen} \n          onClose={closeAllPopups} \n          onUpdateUser={handleUpdateUser}/> \n      <AddPlacePopup \n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}/>\n      <PopupWithForm \n          title = 'Вы уверены?' \n          name = 'delete-card'\n          buttonText = 'Да' />\n      <EditAvatarPopup \n          isOpen={isEditAvatarPopupOpen} \n          onClose={closeAllPopups} \n          onUpdateAvatar={handleUpdateAvatar}/> \n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}