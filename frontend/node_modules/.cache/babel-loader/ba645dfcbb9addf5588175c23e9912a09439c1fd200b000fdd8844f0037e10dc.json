{"ast":null,"code":"import { apiConfig } from \"./constants\";\nclass API {\n  constructor(config) {\n    this.headers = config.headers;\n    this.baseUrl = config.baseUrl;\n  }\n  _checkResponseStatus(response) {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.text().then(text => {\n      throw new Error(`Status: ${response.status}, Message: ${text}`);\n    });\n  }\n  getUserInfo() {\n    return fetch(`${this.baseUrl}/users/me`, {\n      method: \"GET\",\n      headers: this.headers\n    }).then(res => this._checkResponseStatus(res));\n  }\n  editUserInfo(data) {\n    return fetch(`${this.baseUrl}/users/me`, {\n      method: \"PATCH\",\n      headers: this.headers,\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about\n      })\n    }).then(res => this._checkResponseStatus(res));\n  }\n  createCard(card) {\n    return fetch(`${this.baseUrl}/cards`, {\n      method: \"POST\",\n      headers: this.headers,\n      body: JSON.stringify(card)\n    }).then(res => this._checkResponseStatus(res));\n  }\n  deleteCard(id) {\n    return fetch(`${this.baseUrl}/cards/${id}`, {\n      method: \"DELETE\",\n      headers: this.headers\n    }).then(res => this._checkResponseStatus(res));\n  }\n  getCardsList() {\n    return fetch(`${this.baseUrl}/cards`, {\n      method: \"GET\",\n      headers: this.headers\n    }).then(res => this._checkResponseStatus(res));\n  }\n  changeLikeCardStatus(id, isLiked) {\n    if (!isLiked) {\n      return fetch(`${this.baseUrl}/cards/${id}/likes`, {\n        method: \"PUT\",\n        headers: this.headers\n      }).then(res => this._checkResponseStatus(res));\n    }\n    return fetch(`${this.baseUrl}/cards/${id}/likes`, {\n      method: \"DELETE\",\n      headers: this.headers\n    }).then(res => this._checkResponseStatus(res));\n  }\n  updateAvatar(data) {\n    return fetch(`${this.baseUrl}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: this.headers,\n      body: JSON.stringify({\n        avatar: data.avatar\n      })\n    }).then(res => this._checkResponseStatus(res));\n  }\n}\nexport const api = new API(apiConfig);","map":{"version":3,"names":["apiConfig","API","constructor","config","headers","baseUrl","_checkResponseStatus","response","ok","json","text","then","Error","status","getUserInfo","fetch","method","res","editUserInfo","data","body","JSON","stringify","name","about","createCard","card","deleteCard","id","getCardsList","changeLikeCardStatus","isLiked","updateAvatar","avatar","api"],"sources":["/Users/paul/Praktikum/dev/react-mesto-api-full-gha/frontend/src/utils/API.js"],"sourcesContent":["import { apiConfig } from \"./constants\";\n\nclass API {\n  constructor(config) {\n    this.headers = config.headers;\n    this.baseUrl = config.baseUrl;\n  }\n\n  _checkResponseStatus(response) {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.text().then((text) => {\n      throw new Error(`Status: ${response.status}, Message: ${text}`);\n    });\n  }\n\n  getUserInfo() {\n    return fetch(`${this.baseUrl}/users/me`, {\n      method: \"GET\",\n      headers: this.headers,\n    }).then((res) => this._checkResponseStatus(res));\n  }\n\n  editUserInfo(data) {\n    return fetch(`${this.baseUrl}/users/me`, {\n      method: \"PATCH\",\n      headers: this.headers,\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about,\n      }),\n    }).then((res) => this._checkResponseStatus(res));\n  }\n\n  createCard(card) {\n    return fetch(`${this.baseUrl}/cards`, {\n      method: \"POST\",\n      headers: this.headers,\n      body: JSON.stringify(card),\n    }).then((res) => this._checkResponseStatus(res));\n  }\n\n  deleteCard(id) {\n    return fetch(`${this.baseUrl}/cards/${id}`, {\n      method: \"DELETE\",\n      headers: this.headers,\n    }).then((res) => this._checkResponseStatus(res));\n  }\n\n  getCardsList() {\n    return fetch(`${this.baseUrl}/cards`, {\n      method: \"GET\",\n      headers: this.headers,\n    }).then((res) => this._checkResponseStatus(res));\n  }\n\n  changeLikeCardStatus(id, isLiked) {\n    if (!isLiked) {\n      return fetch(`${this.baseUrl}/cards/${id}/likes`, {\n        method: \"PUT\",\n        headers: this.headers,\n      }).then((res) => this._checkResponseStatus(res));\n    }\n    return fetch(`${this.baseUrl}/cards/${id}/likes`, {\n      method: \"DELETE\",\n      headers: this.headers,\n    }).then((res) => this._checkResponseStatus(res));\n  }\n\n  updateAvatar(data) {\n    return fetch(`${this.baseUrl}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: this.headers,\n      body: JSON.stringify({\n        avatar: data.avatar,\n      }),\n    }).then((res) => this._checkResponseStatus(res));\n  }\n}\n\nexport const api = new API(apiConfig);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}