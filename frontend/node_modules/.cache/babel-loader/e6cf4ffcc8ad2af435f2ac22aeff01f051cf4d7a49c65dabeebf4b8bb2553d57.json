{"ast":null,"code":"import _objectSpread from\"/Users/paul/Praktikum/dev/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/Users/paul/Praktikum/dev/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/paul/Praktikum/dev/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{apiConfig}from\"./constants\";var API=/*#__PURE__*/function(){function API(config,token){_classCallCheck(this,API);this.headers=_objectSpread(_objectSpread({},config.headers),{},{authorization:\"Bearer \".concat(token)});this.baseUrl=config.baseUrl;}_createClass(API,[{key:\"_checkResponseStatus\",value:function _checkResponseStatus(response){if(response.ok){return response.json();}return Promise.reject(\"Error: \".concat(response.status));}},{key:\"getUserInfo\",value:function getUserInfo(){var _this=this;return fetch(\"\".concat(this.baseUrl,\"/users/me\"),{method:\"GET\",headers:this.headers}).then(function(res){return _this._checkResponseStatus(res);});}},{key:\"editUserInfo\",value:function editUserInfo(data){var _this2=this;return fetch(\"\".concat(this.baseUrl,\"/users/me\"),{method:\"PATCH\",headers:this.headers,body:JSON.stringify({name:data.name,about:data.about})}).then(function(res){return _this2._checkResponseStatus(res);});}},{key:\"createCard\",value:function createCard(card){var _this3=this;return fetch(\"\".concat(this.baseUrl,\"/cards\"),{method:\"POST\",headers:this.headers,body:JSON.stringify(card)}).then(function(res){return _this3._checkResponseStatus(res);});}},{key:\"deleteCard\",value:function deleteCard(id){var _this4=this;return fetch(\"\".concat(this.baseUrl,\"/cards/\").concat(id),{method:\"DELETE\",headers:this.headers}).then(function(res){return _this4._checkResponseStatus(res);});}},{key:\"getCardsList\",value:function getCardsList(){var _this5=this;return fetch(\"\".concat(this.baseUrl,\"/cards\"),{method:\"GET\",headers:this.headers}).then(function(res){return _this5._checkResponseStatus(res);});}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(id,isLiked){var _this6=this;if(isLiked){return fetch(\"\".concat(this.baseUrl,\"/cards/\").concat(id,\"/likes\"),{method:\"PUT\",headers:this.headers}).then(function(res){return _this6._checkResponseStatus(res);});}return fetch(\"\".concat(this.baseUrl,\"/cards/\").concat(id,\"/likes\"),{method:\"DELETE\",headers:this.headers}).then(function(res){return _this6._checkResponseStatus(res);});}},{key:\"updateAvatar\",value:function updateAvatar(data){var _this7=this;return fetch(\"\".concat(this.baseUrl,\"/users/me/avatar\"),{method:\"PATCH\",headers:this.headers,body:JSON.stringify({avatar:data.avatar})}).then(function(res){return _this7._checkResponseStatus(res);});}}]);return API;}();// export const api = new API(apiConfig);\nexport var createApiInstance=function createApiInstance(token){return new API(apiConfig,token);};","map":{"version":3,"names":["apiConfig","API","config","token","headers","authorization","baseUrl","response","ok","json","Promise","reject","status","fetch","method","then","res","_checkResponseStatus","data","body","JSON","stringify","name","about","card","id","isLiked","avatar","createApiInstance"],"sources":["/Users/paul/Praktikum/dev/react-mesto-api-full-gha/frontend/src/utils/API.js"],"sourcesContent":["import { apiConfig } from \"./constants\";\n\nclass API {\n  constructor(config, token) {\n    this.headers = { ...config.headers, authorization: `Bearer ${token}` };\n    this.baseUrl = config.baseUrl;\n  }\n\n  _checkResponseStatus(response) {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(`Error: ${response.status}`);\n  }\n\n  getUserInfo() {\n    return fetch(`${this.baseUrl}/users/me`, {\n      method: \"GET\",\n      headers: this.headers,\n    }).then((res) => this._checkResponseStatus(res));\n  }\n\n  editUserInfo(data) {\n    return fetch(`${this.baseUrl}/users/me`, {\n      method: \"PATCH\",\n      headers: this.headers,\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about,\n      }),\n    }).then((res) => this._checkResponseStatus(res));\n  }\n\n  createCard(card) {\n    return fetch(`${this.baseUrl}/cards`, {\n      method: \"POST\",\n      headers: this.headers,\n      body: JSON.stringify(card),\n    }).then((res) => this._checkResponseStatus(res));\n  }\n\n  deleteCard(id) {\n    return fetch(`${this.baseUrl}/cards/${id}`, {\n      method: \"DELETE\",\n      headers: this.headers,\n    }).then((res) => this._checkResponseStatus(res));\n  }\n\n  getCardsList() {\n    return fetch(`${this.baseUrl}/cards`, {\n      method: \"GET\",\n      headers: this.headers,\n    }).then((res) => this._checkResponseStatus(res));\n  }\n\n  changeLikeCardStatus(id, isLiked) {\n    if (isLiked) {\n      return fetch(`${this.baseUrl}/cards/${id}/likes`, {\n        method: \"PUT\",\n        headers: this.headers,\n      }).then((res) => this._checkResponseStatus(res));\n    }\n    return fetch(`${this.baseUrl}/cards/${id}/likes`, {\n      method: \"DELETE\",\n      headers: this.headers,\n    }).then((res) => this._checkResponseStatus(res));\n  }\n\n  updateAvatar(data) {\n    return fetch(`${this.baseUrl}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: this.headers,\n      body: JSON.stringify({\n        avatar: data.avatar,\n      }),\n    }).then((res) => this._checkResponseStatus(res));\n  }\n}\n\n// export const api = new API(apiConfig);\nexport const createApiInstance = (token) => {\n  return new API(apiConfig, token);\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}