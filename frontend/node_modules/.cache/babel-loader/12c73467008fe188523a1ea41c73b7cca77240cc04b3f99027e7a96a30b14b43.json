{"ast":null,"code":"import Cookies from 'js-cookie';\nconst BASE_URL = \"http://api.mesto-russia.nomoredomains.monster\";\nconst checkResponseStatus = response => {\n  if (response.ok) {\n    return response.json();\n  }\n  return Promise.reject(`Error: ${response.status}`);\n};\nexport const signUp = async data => {\n  const res = await fetch(`${BASE_URL}/signup`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(data)\n  });\n  return checkResponseStatus(res);\n};\nexport const signIn = async data => {\n  const res = await fetch(`${BASE_URL}/signin`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(data)\n  });\n  const result = await checkResponseStatus(res);\n  const jwtCookie = res.headers.get('set-cookie').split(';')[0].split('=')[1];\n  Cookies.set('jwt', jwtCookie);\n  return result;\n};\nexport const checkAuth = async token => {\n  const res = await fetch(`${BASE_URL}/users/me`, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    }\n  });\n  return checkResponseStatus(res);\n};","map":{"version":3,"names":["Cookies","BASE_URL","checkResponseStatus","response","ok","json","Promise","reject","status","signUp","data","res","fetch","method","headers","body","JSON","stringify","signIn","result","jwtCookie","get","split","set","checkAuth","token","Authorization"],"sources":["/Users/paul/Praktikum/dev/react-mesto-api-full-gha/frontend/src/utils/auth.js"],"sourcesContent":["import Cookies from 'js-cookie';\n\nconst BASE_URL = \"http://api.mesto-russia.nomoredomains.monster\";\n\nconst checkResponseStatus = (response) => {\n  if (response.ok) {\n    return response.json();\n  }\n  return Promise.reject(`Error: ${response.status}`);\n};\n\nexport const signUp = async (data) => {\n  const res = await fetch(`${BASE_URL}/signup`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(data),\n  });\n  return checkResponseStatus(res);\n};\n\nexport const signIn = async (data) => {\n  const res = await fetch(`${BASE_URL}/signin`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(data),\n  });\n  const result = await checkResponseStatus(res);\n  const jwtCookie = res.headers.get('set-cookie').split(';')[0].split('=')[1];\n  Cookies.set('jwt', jwtCookie);\n  return result;\n};\n\nexport const checkAuth = async (token) => {\n  const res = await fetch(`${BASE_URL}/users/me`, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`,\n    },\n  });\n  return checkResponseStatus(res);\n};\n"],"mappings":"AAAA,OAAOA,OAAO,MAAM,WAAW;AAE/B,MAAMC,QAAQ,GAAG,+CAA+C;AAEhE,MAAMC,mBAAmB,GAAIC,QAAQ,IAAK;EACxC,IAAIA,QAAQ,CAACC,EAAE,EAAE;IACf,OAAOD,QAAQ,CAACE,IAAI,EAAE;EACxB;EACA,OAAOC,OAAO,CAACC,MAAM,CAAE,UAASJ,QAAQ,CAACK,MAAO,EAAC,CAAC;AACpD,CAAC;AAED,OAAO,MAAMC,MAAM,GAAG,MAAOC,IAAI,IAAK;EACpC,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAE,GAAEX,QAAS,SAAQ,EAAE;IAC5CY,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACP,IAAI;EAC3B,CAAC,CAAC;EACF,OAAOR,mBAAmB,CAACS,GAAG,CAAC;AACjC,CAAC;AAED,OAAO,MAAMO,MAAM,GAAG,MAAOR,IAAI,IAAK;EACpC,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAE,GAAEX,QAAS,SAAQ,EAAE;IAC5CY,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACP,IAAI;EAC3B,CAAC,CAAC;EACF,MAAMS,MAAM,GAAG,MAAMjB,mBAAmB,CAACS,GAAG,CAAC;EAC7C,MAAMS,SAAS,GAAGT,GAAG,CAACG,OAAO,CAACO,GAAG,CAAC,YAAY,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACA,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAC3EtB,OAAO,CAACuB,GAAG,CAAC,KAAK,EAAEH,SAAS,CAAC;EAC7B,OAAOD,MAAM;AACf,CAAC;AAED,OAAO,MAAMK,SAAS,GAAG,MAAOC,KAAK,IAAK;EACxC,MAAMd,GAAG,GAAG,MAAMC,KAAK,CAAE,GAAEX,QAAS,WAAU,EAAE;IAC9CY,MAAM,EAAE,KAAK;IACbC,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClCY,aAAa,EAAG,UAASD,KAAM;IACjC;EACF,CAAC,CAAC;EACF,OAAOvB,mBAAmB,CAACS,GAAG,CAAC;AACjC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}